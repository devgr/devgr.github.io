(function(e){function t(t){for(var i,n,o=t[0],h=t[1],l=t[2],d=0,u=[];d<o.length;d++)n=o[d],s[n]&&u.push(s[n][0]),s[n]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(e[i]=h[i]);c&&c(t);while(u.length)u.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,o=1;o<r.length;o++){var h=r[o];0!==s[h]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},s={app:0},a=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://devgr.github.io/ascii-cave-v1/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=h;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var i=r("04f5"),s=r.n(i);s.a},"04f5":function(e,t,r){},"2e26":function(e,t,r){"use strict";var i=r("6de6"),s=r.n(i);s.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var i=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("h1",[e._v("ASCII CAVE")]),r("Game"),r("br"),r("pre",[e._v(e._s(e.instructions))])],1)},a=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("pre",[e._v(e._s(e.terminal))]),r("br"),r("pre",[e._v(e._s(e.score))])])},o=[],h=r("c665"),l=r("aa9a"),c=r("dc0a"),d=r("d328"),u=r("11d9"),f=function(){function e(){Object(h["a"])(this,e)}return Object(l["a"])(e,[{key:"onExit",value:function(){}}]),e}(),p=function(e){function t(){var e;return Object(h["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).call(this)),e.sprite=[" "],e.shape=["1"],e}return Object(c["a"])(t,e),t}(f),b=function(e){function t(){var e;return Object(h["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).call(this)),e.sprite=["ASCII CAVE"],e.shape=["1111111111"],e.alreadyExited=!1,e}return Object(l["a"])(t,[{key:"onExit",value:function(e){this.alreadyExited||(e.showStartPrompt(),this.alreadyExited=!0)}}]),Object(c["a"])(t,e),t}(f),m=function(e){function t(){var e;return Object(h["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).call(this)),e.sprite=["Press <space> to start."],e.shape=["11111111111111111111111"],e}return Object(c["a"])(t,e),t}(f),v=function(e){function t(){var e;return Object(h["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).call(this)),e.sprite=["[ ]","\\@/"," V "],e.shape=["1 1","111"," 1 "],e}return Object(c["a"])(t,e),t}(f),g=function(e){function t(){var e;return Object(h["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).call(this)),e.sprite=["#"],e.shape=["1"],e}return Object(c["a"])(t,e),t}(f),w={Blank:p,MainTitle:b,StartPrompt:m,PlayerShip:v,Wall:g},y=w,P=24,T=80,O=function(){function e(t,r,i){Object(h["a"])(this,e),this.update(t,r,i)}return Object(l["a"])(e,[{key:"update",value:function(e,t,r){this.piece=e,this.subY=t,this.subX=r}}]),e}(),S=function(){function e(){Object(h["a"])(this,e),this.boardHeight=P,this.boardWidth=T,this.worldY=0,this.board=this.newBoard()}return Object(l["a"])(e,[{key:"newBoard",value:function(){for(var e=[],t=0;t<this.boardHeight;t++)e.push(this.newRow());return e}},{key:"newRow",value:function(){for(var e=[],t=0;t<this.boardWidth;t++){var r=new y.Blank,i=new O(r,0,0);e.push(i)}return e}},{key:"setBoard",value:function(e){this.worldY=0,this.board=e}},{key:"placePiece",value:function(e,t,r){for(var i=0;i<e.shape.length;i++)for(var s=0;s<e.shape[i].length;s++)if("1"===e.shape[i][s]){var a=this.board[t+i][r+s];a.piece=e,a.subY=i,a.subX=s}}},{key:"removePieceAt",value:function(e,t,r){for(var i=0;i<e.shape.length;i++)for(var s=0;s<e.shape[i].length;s++)if("1"===e.shape[i][s]){var a=this.board[t+i][r+s];a.piece=new y.Blank,a.subY=0,a.subX=0}}},{key:"movePieceAtTo",value:function(e,t,r,i,s){this.removePieceAt(e,t,r),this.placePiece(e,i,s)}},{key:"addRow",value:function(e){this.board.push(e)}},{key:"scroll",value:function(e){for(var t=this.board[0],r=0;r<t.length;r++)t[r].piece.onExit(e);this.board.shift(),this.worldY++}}]),e}(),j=S,k=function(){function e(t,r){Object(h["a"])(this,e),this.gameboard=t,this.domController=r}return Object(l["a"])(e,[{key:"render",value:function(e){for(var t=this.gameboard.board,r="",i=0;i<t.length;i++){for(var s=t[i],a=0;a<s.length;a++){var n=s[a],o=n.piece.sprite,h=o[n.subY][n.subX];r+=h}r+="\n"}this.domController.updateTerminal(r),this.domController.updateScore(e)}}]),e}(),M=k,H=function(){function e(){Object(h["a"])(this,e),this.frameSnapshot={up:{isPressed:!1,isHeld:!1},down:{isPressed:!1,isHeld:!1},left:{isPressed:!1,isHeld:!1},right:{isPressed:!1,isHeld:!1},space:{isPressed:!1,isHeld:!1}}}return Object(l["a"])(e,[{key:"start",value:function(){var e=this;window.addEventListener("keydown",function(t){switch(t.code){case"Space":e.frameSnapshot.space.isPressed=!0,e.frameSnapshot.space.isHeld=!0;break;case"ArrowUp":e.frameSnapshot.up.isPressed=!0,e.frameSnapshot.up.isHeld=!0;break;case"ArrowDown":e.frameSnapshot.down.isPressed=!0,e.frameSnapshot.down.isHeld=!0;break;case"ArrowLeft":e.frameSnapshot.left.isPressed=!0,e.frameSnapshot.left.isHeld=!0;break;case"ArrowRight":e.frameSnapshot.right.isPressed=!0,e.frameSnapshot.right.isHeld=!0;break}}),window.addEventListener("keyup",function(t){switch(t.code){case"Space":e.frameSnapshot.space.isHeld=!1;break;case"ArrowUp":e.frameSnapshot.up.isHeld=!1;break;case"ArrowDown":e.frameSnapshot.down.isHeld=!1;break;case"ArrowLeft":e.frameSnapshot.left.isHeld=!1;break;case"ArrowRight":e.frameSnapshot.right.isHeld=!1;break}})}},{key:"getInput",value:function(){var e=this.frameSnapshot;return this.resetPressed(e),e}},{key:"resetPressed",value:function(e){this.frameSnapshot={up:{isPressed:!1,isHeld:e.up.isHeld},down:{isPressed:!1,isHeld:e.down.isHeld},left:{isPressed:!1,isHeld:e.left.isHeld},right:{isPressed:!1,isHeld:e.right.isHeld},space:{isPressed:!1,isHeld:e.space.isHeld}}}}]),e}(),A=H,_=function(){function e(t,r){Object(h["a"])(this,e),this.gameManager=t,this.gameboard=r,this.spawn()}return Object(l["a"])(e,[{key:"spawn",value:function(){this.piece=new y.PlayerShip,this.y=2,this.x=Math.round(this.gameboard.boardWidth/2-this.piece.shape[0].length/2),this.gameboard.placePiece(this.piece,this.y,this.x)}},{key:"update",value:function(e){var t=0,r=0;e.down.isHeld&&!e.down.isPressed?t+=2:e.down.isPressed&&(t+=1),e.up.isHeld&&!e.up.isPressed?t-=2:e.up.isPressed&&(t-=1),e.right.isHeld&&!e.right.isPressed?r+=2:e.right.isPressed&&(r+=1),e.left.isHeld&&!e.left.isPressed?r-=2:e.left.isPressed&&(r-=1),(this.y+t>=this.gameboard.boardHeight-3||this.y+t<0)&&(t=0),(this.x+r>=this.gameboard.boardWidth-2||this.x+r<0)&&(r=0),this.gameboard.movePieceAtTo(this.piece,this.y,this.x,this.y+t,this.x+r),this.y+=t,this.x+=r}},{key:"scroll",value:function(){this.gameboard.movePieceAtTo(this.piece,this.y,this.x,this.y+1,this.x)}}]),e}(),I=_,x=(r("c5f6"),{INIT:"INIT",MAIN_TITLE:"MAIN_TITLE",START_PROMPT:"START_PROMPT",GAME:"GAME"}),W=function(){function e(t,r,i){Object(h["a"])(this,e),this.gameboard=t,this.playerClass=r,this.mapBuilderClass=i,this.player=null,this.state=x.INIT,this.scrollFactor=1,this.framesSinceScroll=0,this.level=0}return Object(l["a"])(e,[{key:"loadMainTitle",value:function(){this.state=x.MAIN_TITLE;var e=new y.MainTitle,t=this.gameboard.boardHeight-e.shape.length,r=Math.round(this.gameboard.boardWidth/2-e.shape[0].length/2);this.gameboard.placePiece(e,t,r),this.scrollFactor=3}},{key:"update",value:function(e){var t=" ";if(this.state!==x.START_PROMPT&&this.state!==x.MAIN_TITLE||!e.space.isPressed?this.state===x.GAME&&(this.player.update(e),t="Score: "+this.gameboard.worldY):this.startGame(),this.framesSinceScroll>=this.scrollFactor){if(this.state===x.GAME){var r=this.gameboard.newRow();this.mapBuilder.fillRow(r),this.gameboard.addRow(r),this.player.scroll()}else{var i=this.gameboard.newRow();this.gameboard.addRow(i)}this.gameboard.scroll(this),this.framesSinceScroll=0}else this.framesSinceScroll++;return t}},{key:"showStartPrompt",value:function(){this.state=x.START_PROMPT,this.startPrompt=new y.StartPrompt,this.startPromptY=Math.round(this.gameboard.boardHeight/2-this.startPrompt.shape.length/2),this.startPromptX=Math.round(this.gameboard.boardWidth/2-this.startPrompt.shape[0].length/2),this.gameboard.placePiece(this.startPrompt,this.startPromptY,this.startPromptX),this.scrollFactor=Number.POSITIVE_INFINITY}},{key:"startGame",value:function(){this.state=x.GAME,this.level=1,this.scrollFactor=3,this.mapBuilder=new this.mapBuilderClass(this.level);for(var e=this.gameboard.newBoard(),t=0;t<e.length;t++)this.mapBuilder.fillRow(e[t]);this.gameboard.setBoard(e),this.player=new this.playerClass(this,this.gameboard)}}]),e}(),E=W,R=function(){function e(t){Object(h["a"])(this,e),this.difficulty=t,this.rowCount=0,this.leftTrend=1,this.rightTrend=-1,this.leftWall=0,this.rightWall=79}return Object(l["a"])(e,[{key:"fillRow",value:function(e){if(0===this.rowCount)this.leftWall=0,this.rightWall=e.length-1,e[this.leftWall].update(new y.Wall,0,0),e[this.rightWall].update(new y.Wall,0,0);else{for(var t=0;t<=this.leftWall+this.leftTrend;t++)e[t].update(new y.Wall,0,0);for(var r=this.rightWall+this.rightTrend;r<e.length;r++)e[r].update(new y.Wall,0,0);this.updateTrends(e.length-1)}this.rowCount++}},{key:"updateTrends",value:function(e){var t=.4*this.difficulty,r=20*this.difficulty;Math.random()<t&&(this.leftTrend=(Math.random()-.5)*r,this.leftTrend<0&&this.leftWall<=0&&(this.leftTrend=0),this.leftTrend=Math.round(this.leftTrend)),Math.random()<t&&(this.rightTrend=(Math.random()-.5)*r,this.rightTrend>0&&this.rightWall>=e&&(this.rightTrend=0),this.rightTrend=Math.round(this.rightTrend)),this.rightWall+this.rightTrend-(this.leftWall+this.leftTrend)<=3&&(this.leftTrend=0,this.rightTrend=0)}}]),e}(),C=R,B=function(){function e(t){var r=this;Object(h["a"])(this,e),this.gameboard=new j,this.renderer=new M(this.gameboard,t),this.inputter=new A,this.gameManager=new E(this.gameboard,I,C),this.inputter.start(),this.gameManager.loadMainTitle();var i=30,s=1/i*1e3;window.setInterval(function(){r.gameLoop()},s)}return Object(l["a"])(e,[{key:"gameLoop",value:function(){var e=this.inputter.getInput(),t=this.gameManager.update(e);this.renderer.render(t)}}]),e}(),G=B,Y={name:"Game",data:function(){for(var e="",t=0;t<24;t++){for(var r=0;r<80;r++)e+=" ";e+="\n"}return{terminal:e,score:" "}},methods:{updateTerminal:function(e){this.terminal=e},updateScore:function(e){this.score=e}},created:function(){this.game=new G(this)}},L=Y,N=(r("2e26"),r("2877")),F=Object(N["a"])(L,n,o,!1,null,"766595cb",null);F.options.__file="Game.vue";var X=F.exports,V={name:"app",components:{Game:X},data:function(){return{instructions:"Instructions:\n\nArrow keys to move.\nSpace to fire.\nCollect power-ups.\nDon't crash."}}},D=V,$=(r("034f"),Object(N["a"])(D,s,a,!1,null,null,null));$.options.__file="App.vue";var J=$.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(J)}}).$mount("#app")},"6de6":function(e,t,r){}});
//# sourceMappingURL=app.5126a3f1.js.map